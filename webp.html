<html>

<head>
  <title> Sample webpage for moengage integration </title>
 
</head>

<body>
 
   <e> Thank you for submitting the data </e>

  <h1> Your Data </h1>
	<h2> username:  <span id="output1"> </span>  </h2>
	<h2> first-name:  <span id="output2"> </span>  </h2>
	<h2> last-name:  <span id="output3"> </span>  </h2>
	<h2> avatar-url:  <span id="output4"> </span>  </h2>
	<h2> email:  <span id="output5"> </span>  </h2>
	<h2> phone-number:  <span id="output6"> </span>  </h2>
	<h2> city:  <span id="output7"> </span>  </h2>
	<h2> gender:  <span id="output8"> </span>  </h2>
	<h2> updated-at:  <span id="output9"> </span>  </h2>
	<h2> created-at:  <span id="output10"> </span>  </h2>
	<h2> article_heroimage:  <span id="output11"> </span>  </h2>
	<h2> article_url:  <span id="output12"> </span>  </h2>
	<h2> article_title:  <span id="output13"> </span>  </h2>


<script>

  (function(i, s, o, g, r, a, m, n) {
    i.moengage_object = r;
    t = {};
    q = function(f) {
      return function() {
        (i.moengage_q = i.moengage_q || []).push({
          f: f,
          a: arguments
        })
      }
    };
    f = ['track_event', 'add_user_attribute', 'add_first_name', 'add_last_name', 'add_email', 'add_mobile', 'add_user_name', 'add_gender', 'add_birthday', 'destroy_session', 'add_unique_user_id', 'moe_events', 'call_web_push', 'track',
      'location_type_attribute'
    ], h = {
      onsite: ["getData", "registerCallback"]
    };
    for (k in f) {
      t[f[k]] = q(f[k])
    }
    for (k in h)
      for (l in h[k]) {
        null == t[k] && (t[k] = {}), t[k][h[k][l]] = q(k + "." + h[k][l])
      }
    a = s.createElement(o);
    m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m);
    i.moe = i.moe || function() {
      n = arguments[0];
      return t
    };
    a.onload = function() {
      if (n) {
        i[r] = moe(n)
      }
    }
  })(window, document, 'script', 'https://cdn.moengage.com/webpush/moe_webSdk.min.latest.js', 'Moengage')


  Moengage = moe({
    app_id: "F4F88N5DMNG2QRSSDGFVRPTT",
    debug_logs: 0
  });

  Moengage.onsite.registerCallback("Dashboard_Data", function(err, data) {
  if (err) {
  // Handle error case here
  // We could get error for various reasons, like
  // network issues, campaigns not present for a particular tag
  return console.error('Error from moengage:', err);
  }
  console.log('Data for campaign:', data);
  
  let payload = data.payload; // Campaign payload defined during campaign creation
  
  var impTracker = data.imp; // Function, you can call impTracker() to send impression stats for a campaign back to MoEngage. Call this after you have successfully rendered the HTML as per the payload provided.
  
  var clickTracker = data.click({widget_id:"sample_widget_id"}); // Function, you can call clickTracker() to send click stats for a campaign back to MoEngage. Call this when the user clicks on the desired section of the website. Passing widget_id is not mandatory and should only be used in case you want to differentiate the clicks between 2 different widgets of the Web Personalization Campaign.
 
document.getElementById('output1').innerHTML = payload.username;
document.getElementById('output2').innerHTML = payload.'first-name';
document.getElementById('output3').innerHTML = payload.last-name;
document.getElementById('output4').innerHTML = payload.avatar-url;
document.getElementById('output5').innerHTML = payload.email;
document.getElementById('output6').innerHTML = payload.phone-number;
document.getElementById('output7').innerHTML = payload.city;
document.getElementById('output8').innerHTML = payload.gender;
document.getElementById('output9').innerHTML = payload.updated-at;
document.getElementById('output10').innerHTML = payload.created-at;
document.getElementById('output11').innerHTML = payload.article_heroimage;
document.getElementById('output12').innerHTML = payload.article_url[];
document.getElementById('output13').innerHTML = payload.article_title;

	  
 });

	</script>
	

</body>

</html>
